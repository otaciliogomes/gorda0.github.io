{"version":3,"sources":["components/VisuallyHidden.js","components/Caroselus/ListItem.js","components/Caroselus/DotBar.js","components/Caroselus/Block.js","components/LiveText.js","components/Caroselus/_utils.js","components/Caroselus/index.js","App.js","index.js"],"names":["VisuallyHidden","styled","span","ul","Dot","button","props","active","DotBar","currentIndex","range","onClick","ListItem","aria-label","Array","fill","map","_","index","isActive","aria-disabled","className","data-slide","Block","items","currentBlock","item","id","style","flex","LiveText","text","assertive","aria-live","aria-atomic","keysMiddleware","e","fn","a","preventDefault","stopPropagation","StyledCaroselus","div","Caroselus","perPage","infinite","useState","setCurrentBlock","currentItem","setCurrentItem","animation","setAnimation","infiniteMode","setInfiniteMode","blocks","reduce","acc","push","slice","paginate","blockLength","length","isIncreaseInactive","isDecreaseInactive","focusOnItem","itemIdx","blockIdx","document","getElementById","firstElementChild","focus","setAndMove","increaseBlock","decreaseBlock","toggleAnimation","toggleInfinite","handleHelp","alert","keys","37","38","nextItem","nextBlock","39","40","65","73","191","tabIndex","onKeyDown","keyCode","aria-labelledby","disabled","axios","require","getPicsumList","len","from","Math","floor","random","lorem","LoremIpsum","sentencesPerParagraph","max","min","StyledGeneric","GenericItem","title","action","idx","imgId","src","alt","lorems","mock","generateWords","createGenerics","images","App","setImages","useEffect","get","then","res","data","generateParagraphs","ReactDOM","render","StrictMode"],"mappings":"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","file":"static/js/main.3b41c0da.chunk.js","sourcesContent":["import styled from \"styled-components\"\n\nconst VisuallyHidden = styled.span`\n    clip: rect(0 0 0 0);\n    clip-path: inset(50%);\n    height: 1px;\n    overflow: hidden;\n    position: absolute;\n    white-space: nowrap;\n    width: 1px;\n`\n\nexport default VisuallyHidden","import styled from \"styled-components\"\n\nexport default styled.ul`\n    display: flex;\n    flex-direction: row;\n    list-style-type: none;\n    padding: 0;\n    margin: 0;\n    justify-content: center;\n    align-items: stretch\n`","import styled from \"styled-components\"\nimport VisuallyHidden from \"../VisuallyHidden\"\nimport ListItem from \"./ListItem\"\n\nconst Dot = styled.button`\n    color: ${props => props.active ? 'red' : 'black'}\n\n    ${props => props.active && `\n        border: 1px solid #999999;\n        background-color: #cccccc;\n    `}\n`\n\nconst DotBar = ({currentIndex, range, onClick}) => (\n    <ListItem aria-label=\"Paginação do carrossel\">\n        {\n            new Array(range).fill(0).map((_, index) => {\n                const isActive = index === currentIndex\n                return (\n                    <li key={index}>\n                        <Dot\n                        active={isActive}\n                        aria-disabled={isActive}\n                        key={index}\n                        className={\n                            isActive\n                                ? 'caroselus-active-dot current'\n                                : 'caroselus-inactive-dot'\n                        }\n                        onClick={() => onClick(index)}\n                        data-slide={index}>\n                            <VisuallyHidden>Página </VisuallyHidden>\n                            {index + 1}\n                            <VisuallyHidden>{isActive ? \" selecionada.\" : \" aperte para selecionar\"}</VisuallyHidden>\n                        </Dot>\n                    </li>\n                )\n            })\n        }\n    </ListItem>\n)\n\nexport default DotBar","import ListItem from \"./ListItem\"\n\nconst Block = ({items, currentBlock}) => (\n        <ListItem>\n            {\n                items.map((item, index) => (\n                    <li\n                        id={`caroselus-item${index}-block${currentBlock}`}\n                        key={index}\n                        style={{flex: 1}}\n                        >\n                        {item}\n                    </li>\n                ))\n            }\n        </ListItem>\n)\n\nexport default Block","const LiveText = ({id, text, assertive}) => (\n    <div\n        id={id}\n        aria-live={assertive ? \"assertive\": \"polite\"}\n        aria-atomic=\"true\">\n            {text}\n    </div>\n)\n\nexport default LiveText","export const paginate = (items, perPage) =>\n    items.reduce(\n        (acc, _, index) => {\n            if (index % perPage === 0)\n                acc.push(items.slice(index, index + perPage))\n\n            return acc\n        },\n        []\n    )\n\nexport const keysMiddleware = async (e, fn) => {\n    await e.preventDefault()\n    await e.stopPropagation()\n    return fn()\n}\n","import {useState} from 'react'\nimport styled from 'styled-components'\nimport DotBar from './DotBar'\nimport Block from './Block'\nimport VisuallyHidden from '../VisuallyHidden'\nimport LiveText from '../LiveText'\nimport {paginate, keysMiddleware} from './_utils'\n/**\n    TO-DO:\n    TODO: implement animation\n    TODO: add styles\n*/\n\nconst StyledCaroselus = styled.div`\n    display: flex;\n    flex-direction: column;\n    &:focus {\n        outline: none;\n    }\n\n    & div {\n        border: 1px solid #ccc;\n    }\n\n    & .inverser {\n        display: flex;\n        flex-direction: row-reverse;\n    }\n`\nconst Caroselus = ({items, perPage, infinite}) => {\n    const [currentBlock, setCurrentBlock] = useState(0)\n    const [currentItem, setCurrentItem] = useState(null)\n    const [animation, setAnimation] = useState(true) // TODO: implement animation\n    const [infiniteMode, setInfiniteMode] = useState(infinite || false)\n\n    /** BLOCK SETTINGS */\n    const blocks = paginate(items, perPage)\n    const blockLength = blocks.length\n\n    /** CONTROL HANDLERS */\n    const isIncreaseInactive = !infiniteMode && currentBlock === blockLength - 1\n    const isDecreaseInactive = !infiniteMode && currentBlock === 0\n\n    const focusOnItem = async (itemIdx, blockIdx) => {\n        await setCurrentBlock(blockIdx)\n        await document\n            .getElementById(`caroselus-item${itemIdx}-block${blockIdx}`)\n            .firstElementChild\n            .focus()\n        await setCurrentItem(itemIdx)\n    }\n\n    const setAndMove = async blockIdx => {\n        if(currentBlock === blockIdx) return\n\n        await focusOnItem(0, blockIdx)\n    }\n\n    const increaseBlock = () => {\n        return currentBlock < blockLength - 1\n            ? setAndMove(currentBlock + 1)\n            : infiniteMode\n                ? setAndMove(0)\n                : null\n    }\n\n    const decreaseBlock = () => {\n        return currentBlock > 0\n            ? setAndMove(currentBlock - 1)\n            : infiniteMode\n                ? setAndMove(blockLength - 1)\n                : null\n            }\n\n    const increaseItem = () => {\n        const nextItem = currentItem + 1\n        const nextBlock = currentBlock + 1\n\n        if(currentItem == null) setCurrentItem(0)\n        else if (currentItem === blocks[currentBlock].length - 1) {\n            if(currentBlock === blockLength - 1)\n                if(infiniteMode) focusOnItem(0, 0)\n                else return\n            else focusOnItem(0, nextBlock)\n\n            setCurrentItem(0)\n        } else {\n            setCurrentItem(nextItem)\n            focusOnItem(nextItem, currentBlock)\n        }\n    }\n\n    const decreaseItem = () => {\n        if(currentItem == null) setCurrentItem(0)\n        else if (currentItem === 0) {\n            if(currentBlock === 0)\n                if(infiniteMode) focusOnItem(blocks[blockLength - 1].length - 1, blockLength - 1)\n                else return\n            else focusOnItem(blocks[currentBlock].length - 1, currentBlock - 1)\n\n            setCurrentItem(blocks[currentBlock].length - 1)\n        } else {\n            setCurrentItem(currentItem - 1)\n            focusOnItem(currentItem - 1, currentBlock)\n        }\n    }\n\n    const toggleAnimation = () => setAnimation(!animation)\n    const toggleInfinite = () => setInfiniteMode(!infiniteMode)\n    const handleHelp = () => alert(\"help modal\") // TODO: implement help modal\n\n    const keys = {\n        37: decreaseBlock,\n        38: increaseItem,\n        39: increaseBlock,\n        40: decreaseItem,\n        65: toggleAnimation,\n        73: toggleInfinite,\n        191: handleHelp,\n    }\n\n    const handleKeyDown = (e) =>\n        e.keyCode in keys\n        ? keysMiddleware(e, keys[e.keyCode])\n        : null\n\n    return (\n        <StyledCaroselus tabIndex={0} onKeyDown={handleKeyDown} id=\"caroselus\" aria-labelledby=\"caroselus-label\">\n            <VisuallyHidden>\n                <span id=\"caroselus-label\">Carrossel vitrine de promoções</span>\n                <LiveText text={`Página ${currentBlock + 1} de ${blockLength}`}/>\n                <LiveText text={`Item ${currentItem + 1} de ${blocks[currentBlock].length}`}/>\n                <LiveText assertive text={`Apresentação infinita ${infiniteMode ? 'ativada' : 'desativada'}`} />\n                <LiveText assertive text={`Animações ${animation ? 'ativada' : 'desativada'}`} />\n            </VisuallyHidden>\n            <div id=\"caroselus-presentation-bar\" className=\"inverser\">\n                <div>\n                    <button onClick={toggleInfinite}>\n                        {`${infiniteMode ? \"Desabilitar\" : \"Habilitar\"} apresentação infinita` /* TODO: i18n*/}\n                    </button>\n                    <button onClick={toggleAnimation}>\n                        {`${animation ? \"Desabilitar\" : \"Habilitar\"} animações` /* TODO: i18n*/}\n                    </button>\n                </div>\n            </div>\n            <div id=\"caroselus-content\">\n                <Block items={blocks[currentBlock]} currentBlock={currentBlock}/>\n            </div>\n            <div id=\"caroselus-controls\">\n                <button onClick={decreaseBlock} disabled={isDecreaseInactive}>Anterior</button>\n                <button onClick={increaseBlock} disabled={isIncreaseInactive}>Próximo</button>\n            </div>\n            <div id=\"caroselus-bar\">\n                <DotBar range={blockLength} onClick={setAndMove} currentIndex={currentBlock}/>\n            </div>\n            <div id=\"caroselus-help\" className=\"inverser\">\n                <button onClick={handleHelp}>Ajuda</button>\n            </div>\n        </StyledCaroselus>\n    )\n    }\n\nexport default Caroselus","import {useEffect, useState} from 'react'\nimport styled from 'styled-components';\nimport './App.css';\nimport Caroselus from './components/Caroselus';\nimport { LoremIpsum } from \"lorem-ipsum\";\nconst axios = require('axios');\n\nconst randomValue = from => Math.floor(Math.random() * from * 10) + 1\nconst getPicsumList = len => `https://picsum.photos/v2/list?page=${randomValue(len)}&limit=${len}`\nconst getPicsum = id => `https://picsum.photos/id/${id}/120/120`\n\nconst lorem = new LoremIpsum({\n  sentencesPerParagraph: {\n    max: 4,\n    min: 4,\n  },\n})\n\n\nconst StyledGeneric = styled.button`\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  height: 100%\n`\n\n/** MOCK */\nconst GenericItem = ({title, action, idx, imgId}) => (\n  <StyledGeneric onClick={action}>\n    <img src={getPicsum(imgId)}  alt=\"\" />\n    <strong>{title}</strong>\n    <p>{lorems[idx]}</p>\n    <span>Confira!</span>\n  </StyledGeneric>\n)\n\nconst mock = [\n  'IBIZA',\n  'SAO PAULO',\n  'RIO DE JANEIRO',\n  'MACEIO',\n  'ALAGOAS',\n  'BAHIA',\n  'MINAS GERAIS',\n  'NOVA YORK',\n  'MANAUS',\n  'ACRE',\n  'WASHINGTON',\n  'NEBRASKA', 'PRAIA GRANDE'\n]\n\nconst lorems = mock.map(_ => lorem.generateWords(10))\n\nconst createGenerics = images => mock.map((text, idx) => <GenericItem title={text} idx={idx} imgId={images.length && images[idx].id}/>)\n\nfunction App() {\n  const [images, setImages] = useState([]);\n\n  useEffect(() => {\n    axios.get(getPicsumList(mock.length))\n      .then(res => {\n        setImages(res.data)\n      })\n  }, [])\n\n  return (\n    <div className=\"App\">\n      <h1>POC Carrossel</h1>\n      <button>Botão teste 01</button><br/>\n      <button>Botão teste 02</button><br/>\n      <span>{lorem.generateParagraphs(1)}</span> <br/>\n      <Caroselus items={createGenerics(images)} perPage={4} infinite images={images}/><br/>\n      <span>{lorem.generateParagraphs(1)}</span> <br/>\n      <button>Botão teste 03</button><br/>\n      <button>Botão teste 04</button><br/>\n    </div>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}