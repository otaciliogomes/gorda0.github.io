{"version":3,"sources":["components/VisuallyHidden.js","components/ListItem.js","components/DotBar.js","components/Block.js","components/LiveText.js","utils.js","components/Caroselus.js","App.js","index.js"],"names":["VisuallyHidden","children","className","styled","ul","Dot","button","props","active","DotBar","currentIndex","range","onClick","ListItem","aria-label","Array","fill","map","_","index","isActive","aria-disabled","data-slide","Block","items","currentBlock","item","id","style","flex","LiveText","text","hidden","assertive","aria-live","aria-atomic","keysMiddleware","e","fn","a","preventDefault","stopPropagation","mountPicsumUrl","len","from","Math","floor","random","StyledCaroselus","div","Caroselus","perPage","infinite","useState","setCurrentBlock","currentItem","setCurrentItem","animation","setAnimation","infiniteMode","setInfiniteMode","blocks","reduce","acc","push","slice","paginate","blockLength","length","isIncreaseInactive","isDecreaseInactive","focusOnItem","itemIdx","blockIdx","document","getElementById","firstElementChild","focus","setAndMove","increaseBlock","decreaseBlock","toggleAnimation","toggleInfinite","handleHelp","alert","keys","37","38","nextItem","nextBlock","39","40","65","73","191","tabIndex","onKeyDown","keyCode","aria-labelledby","disabled","axios","require","lorem","LoremIpsum","sentencesPerParagraph","max","min","StyledGeneric","GenericItem","title","action","idx","img","src","alt","lorems","mock","generateWords","createGenerics","images","App","setImages","useEffect","get","then","res","data","generateParagraphs","ReactDOM","render","StrictMode"],"mappings":"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","file":"static/js/main.1cd98afd.chunk.js","sourcesContent":["const VisuallyHidden = ({children}) => (\n    <span className=\"visually-hidden\">\n        {children}\n    </span>\n)\n\nexport default VisuallyHidden","import styled from \"styled-components\"\n\nexport default styled.ul`\n    display: flex;\n    flex-direction: row;\n    list-style-type: none;\n    padding: 0;\n    margin: 0;\n    justify-content: center;\n    align-items: stretch\n`","import styled from \"styled-components\"\nimport VisuallyHidden from \"./VisuallyHidden\"\nimport ListItem from \"./ListItem\"\n\nconst Dot = styled.button`\n    color: ${props => props.active ? 'red' : 'black'}\n\n    ${props => props.active && `\n        border: 1px solid #999999;\n        background-color: #cccccc;\n    `}\n`\n\nconst DotBar = ({currentIndex, range, onClick}) => (\n    <ListItem aria-label=\"Paginação do carrossel\">\n        {\n            new Array(range).fill(0).map((_, index) => {\n                const isActive = index === currentIndex\n                return (\n                    <li key={index}>\n                        <Dot\n                        active={isActive}\n                        aria-disabled={isActive}\n                        key={index}\n                        className={\n                            isActive\n                                ? 'caroselus-active-dot current'\n                                : 'caroselus-inactive-dot'\n                        }\n                        onClick={() => onClick(index)}\n                        data-slide={index}>\n                            <VisuallyHidden>Página </VisuallyHidden>\n                            {index + 1}\n                            <VisuallyHidden>{isActive ? \" selecionada.\" : \" aperte para selecionar\"}</VisuallyHidden>\n                        </Dot>\n                    </li>\n                )\n            })\n        }\n    </ListItem>\n)\n\nexport default DotBar","import ListItem from \"./ListItem\"\n\nconst Block = ({items, currentBlock}) => (\n        <ListItem>\n            {\n                items.map((item, index) => (\n                    <li\n                        id={`caroselus-item${index}-block${currentBlock}`}\n                        key={index}\n                        style={{flex: 1}}\n                        >\n                        {item}\n                    </li>\n                ))\n            }\n        </ListItem>\n)\n\nexport default Block","const LiveText = ({id, text, hidden, assertive}) => (\n    <div\n        id={id}\n        aria-live={assertive ? \"assertive\": \"polite\"}\n        aria-atomic=\"true\"\n        className={hidden ? 'visually-hidden' : ''}>\n            {text}\n    </div>\n)\n\nexport default LiveText","export const paginate = (items, perPage) =>\n    items.reduce(\n        (acc, _, index) => {\n            if (index % perPage === 0)\n                acc.push(items.slice(index, index + perPage))\n\n            return acc\n        },\n        []\n    )\n\nexport const keysMiddleware = async (e, fn) => {\n    await e.preventDefault()\n    await e.stopPropagation()\n    return fn()\n}\n\nexport const randomValue = from => Math.floor(Math.random() * from * 10) + 1\n\nexport const mountPicsumUrl = len => `https://picsum.photos/v2/list?page=${randomValue(len)}&limit=${len}`","import {useState} from 'react'\nimport styled from 'styled-components'\nimport DotBar from './DotBar'\nimport Block from './Block'\nimport VisuallyHidden from './VisuallyHidden'\nimport LiveText from './LiveText'\nimport {paginate, keysMiddleware} from '../utils'\n/**\n    TO-DO:\n    TODO: implement animation\n    TODO: add styles\n*/\n\nconst StyledCaroselus = styled.div`\n    display: flex;\n    flex-direction: column;\n    &:focus {\n        outline: none;\n    }\n\n    & div {\n        border: 1px solid #ccc;\n    }\n\n    & .inverser {\n        display: flex;\n        flex-direction: row-reverse;\n    }\n`\nconst Caroselus = ({items, perPage, infinite}) => {\n    const [currentBlock, setCurrentBlock] = useState(0)\n    const [currentItem, setCurrentItem] = useState(null)\n    const [animation, setAnimation] = useState(true) // TODO: implement animation\n    const [infiniteMode, setInfiniteMode] = useState(infinite || false)\n\n    /** BLOCK SETTINGS */\n    const blocks = paginate(items, perPage)\n    const blockLength = blocks.length\n\n    /** CONTROL HANDLERS */\n    const isIncreaseInactive = !infiniteMode && currentBlock === blockLength - 1\n    const isDecreaseInactive = !infiniteMode && currentBlock === 0\n\n    const focusOnItem = async (itemIdx, blockIdx) => {\n        await setCurrentBlock(blockIdx)\n        await document\n            .getElementById(`caroselus-item${itemIdx}-block${blockIdx}`)\n            .firstElementChild\n            .focus()\n        await setCurrentItem(itemIdx)\n    }\n\n    const setAndMove = async blockIdx => {\n        if(currentBlock === blockIdx) return\n\n        await focusOnItem(0, blockIdx)\n    }\n\n    const increaseBlock = () => {\n        return currentBlock < blockLength - 1\n            ? setAndMove(currentBlock + 1)\n            : infiniteMode\n                ? setAndMove(0)\n                : null\n    }\n\n    const decreaseBlock = () => {\n        return currentBlock > 0\n            ? setAndMove(currentBlock - 1)\n            : infiniteMode\n                ? setAndMove(blockLength - 1)\n                : null\n            }\n\n    const increaseItem = () => {\n        const nextItem = currentItem + 1\n        const nextBlock = currentBlock + 1\n\n        if(currentItem == null) setCurrentItem(0)\n        else if (currentItem === blocks[currentBlock].length - 1) {\n            if(currentBlock === blockLength - 1)\n                if(infiniteMode) focusOnItem(0, 0)\n                else return\n            else focusOnItem(0, nextBlock)\n\n            setCurrentItem(0)\n        } else {\n            setCurrentItem(nextItem)\n            focusOnItem(nextItem, currentBlock)\n        }\n    }\n\n    const decreaseItem = () => {\n        if(currentItem == null) setCurrentItem(0)\n        else if (currentItem === 0) {\n            if(currentBlock === 0)\n                if(infiniteMode) focusOnItem(blocks[blockLength - 1].length - 1, blockLength - 1)\n                else return\n            else focusOnItem(blocks[currentBlock].length - 1, currentBlock - 1)\n\n            setCurrentItem(blocks[currentBlock].length - 1)\n        } else {\n            setCurrentItem(currentItem - 1)\n            focusOnItem(currentItem - 1, currentBlock)\n        }\n    }\n\n    const toggleAnimation = () => setAnimation(!animation)\n    const toggleInfinite = () => setInfiniteMode(!infiniteMode)\n    const handleHelp = () => alert(\"help modal\") // TODO: implement help modal\n\n    const keys = {\n        37: decreaseBlock,\n        38: increaseItem,\n        39: increaseBlock,\n        40: decreaseItem,\n        65: toggleAnimation,\n        73: toggleInfinite,\n        191: handleHelp,\n    }\n\n    const handleKeyDown = (e) =>\n        e.keyCode in keys\n        ? keysMiddleware(e, keys[e.keyCode])\n        : null\n\n    return (\n        <StyledCaroselus tabIndex={0} onKeyDown={handleKeyDown} id=\"caroselus\" aria-labelledby=\"caroselus-label\">\n            <VisuallyHidden>\n                <span id=\"caroselus-label\">Carrossel vitrine de promoções</span>\n                <LiveText text={`Página ${currentBlock + 1} de ${blockLength}`}/>\n                <LiveText text={`Item ${currentItem + 1} de ${blocks[currentBlock].length}`}/>\n                <LiveText assertive text={`Apresentação infinita ${infiniteMode ? 'ativada' : 'desativada'}`} />\n                <LiveText assertive text={`Animações ${animation ? 'ativada' : 'desativada'}`} />\n            </VisuallyHidden>\n            <div id=\"caroselus-presentation-bar\" className=\"inverser\">\n                <div>\n                    <button onClick={toggleInfinite}>\n                        {`${infiniteMode ? \"Desabilitar\" : \"Habilitar\"} apresentação infinita` /* TODO: i18n*/}\n                    </button>\n                    <button onClick={toggleAnimation}>\n                        {`${animation ? \"Desabilitar\" : \"Habilitar\"} animações` /* TODO: i18n*/}\n                    </button>\n                </div>\n            </div>\n            <div id=\"caroselus-content\">\n                <Block items={blocks[currentBlock]} currentBlock={currentBlock}/>\n            </div>\n            <div id=\"caroselus-controls\">\n                <button onClick={decreaseBlock} disabled={isDecreaseInactive}>Anterior</button>\n                <button onClick={increaseBlock} disabled={isIncreaseInactive}>Próximo</button>\n            </div>\n            <div id=\"caroselus-bar\">\n                <DotBar range={blockLength} onClick={setAndMove} currentIndex={currentBlock}/>\n            </div>\n            <div id=\"caroselus-help\" className=\"inverser\">\n                <button onClick={handleHelp}>Ajuda</button>\n            </div>\n        </StyledCaroselus>\n    )\n    }\n\nexport default Caroselus","import {useEffect, useState} from 'react'\nimport styled from 'styled-components';\nimport './App.css';\nimport Caroselus from './components/Caroselus';\nimport { LoremIpsum } from \"lorem-ipsum\";\nimport { mountPicsumUrl } from './utils';\nconst axios = require('axios');\n\nconst lorem = new LoremIpsum({\n  sentencesPerParagraph: {\n    max: 4,\n    min: 4,\n  },\n})\n\n\nconst StyledGeneric = styled.button`\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  height: 100%\n`\n\n/** MOCK */\n// TODO: Improve mock generator\nconst GenericItem = ({title, action, idx, img}) => (\n  <StyledGeneric onClick={action}>\n    <img src={`https://picsum.photos/id/${img}/120/120`}  alt=\"\" />\n    <strong>{title}</strong>\n    <p>{lorems[idx]}</p>\n    <span>Confira!</span>\n  </StyledGeneric>\n)\n\nconst mock = [\n  'IBIZA',\n  'SAO PAULO',\n  'RIO DE JANEIRO',\n  'MACEIO',\n  'ALAGOAS',\n  'BAHIA',\n  'MINAS GERAIS',\n  'NOVA YORK',\n  'MANAUS',\n  'ACRE',\n  'WASHINGTON',\n  'NEBRASKA', 'PRAIA GRANDE'\n]\n\nconst lorems = mock.map(_ => lorem.generateWords(10))\n\nconst createGenerics = images => mock.map((text, idx) => <GenericItem title={text} idx={idx} img={images.length && images[idx].id}/>)\n\nfunction App() {\n  const [images, setImages] = useState([]);\n\n  useEffect(() => {\n    axios.get(mountPicsumUrl(mock.length))\n      .then(res => {\n        setImages(res.data)\n      })\n  }, [])\n\n  return (\n    <div className=\"App\">\n      <h1>POC Carrossel</h1>\n      <button>Botão teste 01</button><br/>\n      <button>Botão teste 02</button><br/>\n      <span>{lorem.generateParagraphs(1)}</span> <br/>\n      <Caroselus items={createGenerics(images)} perPage={4} infinite images={images}/><br/>\n      <span>{lorem.generateParagraphs(1)}</span> <br/>\n      <button>Botão teste 03</button><br/>\n      <button>Botão teste 04</button><br/>\n    </div>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}