{"version":3,"sources":["components/VisuallyHidden.js","components/ListItem.js","components/DotBar.js","components/Block.js","components/LiveText.js","components/Caroselus.js","App.js","index.js"],"names":["VisuallyHidden","children","className","styled","ul","Dot","button","props","active","DotBar","currentIndex","range","onClick","ListItem","aria-label","Array","fill","map","_","index","isActive","aria-disabled","data-slide","Block","items","currentBlock","item","id","style","flex","LiveText","text","hidden","aria-live","aria-atomic","StyledCaroselus","div","Caroselus","perPage","infinite","useState","setCurrentBlock","currentItem","setCurrentItem","animation","setAnimation","totalBlocks","Math","ceil","length","blocks","reduce","acc","push","slice","isIncreaseInactive","isDecreaseInactive","stopKeys","e","preventDefault","stopPropagation","increaseBlock","setAndMove","decreaseBlock","focusOnItem","itemIdx","blockIdx","a","el","document","getElementById","firstElementChild","focus","handleHelp","alert","tabIndex","onKeyDown","keyCode","increaseItem","decreaseItem","aria-labelledby","disabled","lorem","LoremIpsum","sentencesPerParagraph","max","min","StyledGeneric","GenericItem","title","action","idx","lorems","mock","generateParagraphs","createGenerics","App","ReactDOM","render","StrictMode"],"mappings":"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","file":"static/js/main.15896302.chunk.js","sourcesContent":["const VisuallyHidden = ({children}) => (\n    <span className=\"visually-hidden\">\n        {children}\n    </span>\n)\n\nexport default VisuallyHidden","import styled from \"styled-components\"\n\nexport default styled.ul`\n    display: flex;\n    flex-direction: row;\n    list-style-type: none;\n    padding: 0;\n    margin: 0;\n    justify-content: center;\n    align-items: center\n`","import styled from \"styled-components\"\nimport VisuallyHidden from \"./VisuallyHidden\"\nimport ListItem from \"./ListItem\"\n\nconst Dot = styled.button`\n    color: ${props => props.active ? 'red' : 'black'}\n\n    ${props => props.active && `\n        border: 1px solid #999999;\n        background-color: #cccccc;\n    `}\n`\n\nconst DotBar = ({currentIndex, range, onClick}) => (\n    <ListItem aria-label=\"Paginação do carrossel\">\n        {\n            new Array(range).fill(0).map((_, index) => {\n                const isActive = index === currentIndex\n                return (\n                    <li>\n                        <Dot\n                        active={isActive}\n                        aria-disabled={isActive}\n                        key={index}\n                        className={\n                            isActive\n                                ? 'caroselus-active-dot current'\n                                : 'caroselus-inactive-dot'\n                        }\n                        onClick={() => onClick(index)}\n                        data-slide={index}>\n                            <VisuallyHidden>Página </VisuallyHidden>\n                            {index + 1}\n                            <VisuallyHidden>{isActive ? \" selecionada.\" : \" aperte para selecionar\"}</VisuallyHidden>\n                        </Dot>\n                    </li>\n                )\n            })\n        }\n    </ListItem>\n)\n\nexport default DotBar","import ListItem from \"./ListItem\"\n\nconst Block = ({items, currentBlock}) => (\n        <ListItem>\n            {\n                items.map((item, index) => (\n                    <li\n                        id={`caroselus-item${index}-block${currentBlock}`}\n                        key={index}\n                        style={{flex: 1}}\n                        >\n                        {item}\n                    </li>\n                ))\n            }\n        </ListItem>\n)\n\nexport default Block","const LiveText = ({id, text, hidden}) => (\n    <div\n        id={id}\n        aria-live=\"polite\"\n        aria-atomic=\"true\"\n        className={hidden ? 'visually-hidden' : ''}>\n            {text}\n    </div>\n)\n\nexport default LiveText","import {useState, useRef} from 'react'\nimport styled from 'styled-components'\nimport DotBar from './DotBar'\nimport Block from './Block'\nimport VisuallyHidden from './VisuallyHidden'\nimport LiveText from './LiveText'\n\nconst StyledCaroselus = styled.div`\n    display: flex;\n    flex-direction: column;\n    &:focus {\n        outline: none;\n    }\n\n    & div {\n        flex: 1;\n        border: 1px solid #ccc;\n    }\n`\nconst Caroselus = ({items, perPage, infinite}) => {\n    const [currentBlock, setCurrentBlock] = useState(0)\n    const [currentItem, setCurrentItem] = useState(0)\n    const [animation, setAnimation] = useState(true)\n\n    /** BLOCK SETTINGS */\n    const totalBlocks = Math.ceil(items.length / perPage)\n    const blocks = items.reduce(\n        (acc, _, index) => {\n            if (index % perPage === 0)\n                acc.push(items.slice(index, index + perPage))\n\n            return acc\n        },\n        []\n    )\n\n    /** CONTROL HANDLERS */\n    const isIncreaseInactive = !infinite && currentBlock === totalBlocks - 1\n    const isDecreaseInactive = !infinite && currentBlock === 0\n\n    const stopKeys = e => {\n        e.preventDefault()\n        e.stopPropagation()\n    }\n    const increaseBlock = (e) => {\n        stopKeys(e)\n        currentBlock < blocks.length - 1\n            ? setAndMove(currentBlock + 1)\n            : setAndMove(0)\n    }\n\n    const decreaseBlock = (e) => {\n        stopKeys(e)\n        currentBlock > 0\n            ? setAndMove(currentBlock - 1)\n            : setAndMove(blocks.length - 1)\n    }\n\n    const focusOnItem = async (itemIdx, blockIdx) => {\n        await setCurrentBlock(blockIdx)\n        const el = document.getElementById(`caroselus-item${itemIdx}-block${blockIdx}`)\n        await el.firstElementChild.focus()\n    }\n\n    const setAndMove = async blockIdx => {\n        if(currentBlock === blockIdx) return\n\n        await focusOnItem(0, blockIdx)\n    }\n\n    const increaseItem = (e) => {\n        stopKeys(e)\n        if (currentItem === blocks[currentBlock].length - 1) {\n            if (infinite) {\n                if(currentBlock === totalBlocks - 1) {\n                    focusOnItem(0, 0)\n                } else {\n                    focusOnItem(0, currentBlock + 1)\n                }\n                setCurrentItem(0)\n            } else {\n                setCurrentItem(blocks[currentBlock].length - 1)\n            }\n        } else {\n            setCurrentItem(currentItem + 1)\n            focusOnItem(currentItem + 1, currentBlock)\n        }\n    }\n\n    const decreaseItem = (e) => {\n        stopKeys(e)\n        if (currentItem === 0) {\n            if (infinite) {\n                if(currentBlock === 0)\n                    focusOnItem(blocks[totalBlocks - 1].length - 1, totalBlocks - 1)\n                else\n                    focusOnItem(blocks[currentBlock].length - 1, currentBlock - 1)\n\n                setCurrentItem(blocks[currentBlock].length - 1)\n            } else {\n                setCurrentItem(0)\n            }\n        } else {\n            setCurrentItem(currentItem - 1)\n            focusOnItem(currentItem - 1, currentBlock)\n        }\n    }\n\n    const handleKeyDown = (e) => {\n        return e.keyCode === 37 // left\n            ? decreaseBlock(e)\n            : e.keyCode === 39 // right\n                ? increaseBlock(e)\n                : e.keyCode === 38 // up\n                    ? increaseItem(e)\n                    : e.keyCode === 40 // down\n                        ? decreaseItem(e)\n                        : e.keyCode === 191 // interrogation\n                            ? handleHelp()\n                            : null\n    }\n\n    const toggleAnimation = () => setAnimation(!animation)\n    const handleHelp = () => alert(\"help modal\")\n    return (\n        <StyledCaroselus tabIndex={-1} onKeyDown={handleKeyDown} id=\"caroselus\" aria-labelledby=\"#caroselus-label\">\n            <VisuallyHidden>\n                <span id=\"caroselus-label\">Carrossel vitrine de promoções</span>\n                <LiveText text={` Página ${currentBlock + 1} de ${blocks.length}`}/>\n            </VisuallyHidden>\n            <div id=\"caroselus-animation-bar\">\n                <button onClick={toggleAnimation}>\n                    {`${animation ? \"Desabilitar\" : \"Habilitar\"} animações`}\n                </button>\n            </div>\n            <div id=\"caroselus-content\">\n                <Block items={blocks[currentBlock]} currentBlock={currentBlock}/>\n            </div>\n            <div id=\"caroselus-controls\">\n                <button onClick={decreaseBlock} disabled={isDecreaseInactive}>Anterior</button>\n                <button onClick={increaseBlock} disabled={isIncreaseInactive}>Próximo</button>\n            </div>\n            <div id=\"caroselus-bar\">\n                <DotBar range={totalBlocks} onClick={setAndMove} currentIndex={currentBlock}/>\n            </div>\n            <div id=\"caroselus-help\">\n                <button onClick={handleHelp}>Ajuda</button>\n            </div>\n        </StyledCaroselus>\n    )\n    }\n\nexport default Caroselus","import styled from 'styled-components';\nimport './App.css';\nimport Caroselus from './components/Caroselus';\nimport { LoremIpsum } from \"lorem-ipsum\";\n\nconst lorem = new LoremIpsum({\n  sentencesPerParagraph: {\n    max: 6,\n    min: 4\n  },\n})\n\n\nconst StyledGeneric = styled.button`\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  flex: 1;\n`\nconst GenericItem = ({title, action, idx}) => (\n  <StyledGeneric onClick={action}>\n    <h3>{title}</h3>\n    <p>{lorems[idx]}</p>\n    <span>Confira!</span>\n  </StyledGeneric>\n)\n\nconst mock = [\n  'IBIZA',\n  'SAO PAULO',\n  'RIO DE JANEIRO',\n  'MACEIO',\n  'ALAGOAS',\n  'BAHIA',\n  'MINAS GERAIS',\n  'NOVA YORK',\n  'MANAUS',\n  'ACRE',\n  'WASHINGTON',\n  'NEBRASKA'\n]\n\nconst lorems = mock.map(_ => lorem.generateParagraphs(1))\n\nconst createGenerics = mock.map((text, idx) => <GenericItem title={text} idx={idx} />)\n\nfunction App() {\n  return (\n    <div className=\"App\">\n      <Caroselus items={createGenerics} perPage={3} infinite/>\n    </div>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}